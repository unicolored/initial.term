{"version":3,"file":"console.js","sourceRoot":"","sources":["src/console.ts"],"names":[],"mappings":"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","sourcesContent":["import {LitElement, html} from 'lit';\nimport {customElement, property} from 'lit/decorators.js';\nimport {stylesConsole} from './lib/styles/styles-console.js';\nimport {Audio} from './lib/audio';\nimport './terminal';\nimport {ConsoleConfig} from './lib/interface';\nimport {createRef, Ref, ref} from 'lit/directives/ref.js';\nimport {Terminal} from './terminal';\n\n@customElement('initial-console')\nexport class Console extends LitElement {\n  static override styles = stylesConsole;\n\n  @property({type: Object}) config: Partial<ConsoleConfig> = {\n    showDrop: false,\n  };\n  @property({type: Boolean, reflect: true}) private open = false;\n  @property({type: String})\n  private banner = `initial.sh - Type \"exit\" to close`;\n  @property({type: Boolean}) private static = false;\n  @property({type: Boolean}) private sounds = false;\n\n  private audio: Audio | null = null;\n\n  private shellElement: Ref<Terminal> = createRef();\n\n  constructor() {\n    super();\n\n    if (!this.static) {\n      // Add keyboard listener in constructor\n      document.addEventListener('keyup', this.handleKeydown.bind(this));\n    }\n  }\n\n  override disconnectedCallback() {\n    // Clean up listener when elementâ€™s removed\n    document.removeEventListener('keyup', this.handleKeydown.bind(this));\n\n    super.disconnectedCallback();\n  }\n\n  override firstUpdated() {\n    if (this.static) {\n      this.show();\n    }\n\n    if (this.sounds) {\n      this.audio = new Audio();\n    }\n\n    if (this.shellElement?.value) {\n      this.shellElement.value.addEventListener('console:close', () => {\n        this.close();\n      });\n    }\n  }\n\n  override render() {\n    return html`<initial-terminal\n        ${ref(this.shellElement)}\n        banner=${this.banner}\n        sounds=${this.sounds}\n      ></initial-terminal>\n      ${this.config.showDrop && !this.static\n        ? html`\n            <button @click=${() => (this.open ? this.close() : this.show())}>\n              initial\n              ${this.open\n                ? html`<svg\n                    width=\"16\"\n                    height=\"16\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"currentColor\"\n                  >\n                    <path\n                      d=\"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z\"\n                    ></path>\n                  </svg>`\n                : html`<svg\n                    width=\"16\"\n                    height=\"16\"\n                    viewBox=\"0 0 24 24\"\n                    fill=\"currentColor\"\n                  >\n                    <path\n                      d=\"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z\"\n                    ></path>\n                  </svg>`}\n            </button>\n          `\n        : ''} `;\n  }\n\n  private handleKeydown(e: KeyboardEvent) {\n    if (e.key === 'Help' && !e.shiftKey && !e.ctrlKey && !e.altKey) {\n      if (!this.open) {\n        this.show();\n      } else {\n        this.close();\n      }\n    }\n  }\n\n  show() {\n    if (!this.open) {\n      this.open = true;\n      this.audio?.playSound(900, 'triangle', 0.08);\n      this.shellElement.value?.focusInput();\n    }\n  }\n\n  close() {\n    if (this.open) {\n      this.open = false;\n      this.audio?.playSound(500, 'sine', 0.05);\n    }\n  }\n}\n"]}